(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[486],{3082:function(e,t,a){Promise.resolve().then(a.bind(a,4438))},257:function(e,t,a){"use strict";var n,r;e.exports=(null==(n=a.g.process)?void 0:n.env)&&"object"==typeof(null==(r=a.g.process)?void 0:r.env)?a.g.process:a(4227)},4227:function(e){!function(){var t={229:function(e){var t,a,n,r=e.exports={};function o(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{a="function"==typeof clearTimeout?clearTimeout:i}catch(e){a=i}}();var l=[],u=!1,c=-1;function d(){u&&n&&(u=!1,n.length?l=n.concat(l):c=-1,l.length&&m())}function m(){if(!u){var e=s(d);u=!0;for(var t=l.length;t;){for(n=l,l=[];++c<t;)n&&n[c].run();c=-1,t=l.length}n=null,u=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===i||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];l.push(new f(e,t)),1!==l.length||u||s(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var o=a[e]={exports:{}},i=!0;try{t[e](o,o.exports,n),i=!1}finally{i&&delete a[e]}return o.exports}n.ab="//";var r=n(229);e.exports=r}()},4438:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var n=a(7437),r=a(2598),o=a(5788),i=a(2704),s=a(7648),l=a(9376),u=a(2265);let c={id:"0",nama:"",alamat:"",kontak:"",created_at:"",updated_at:""};var d=a(257);function m(){let e=(0,l.useRouter)(),[t,a]=(0,u.useState)({}),[m,f]=(0,u.useState)([c]),[h,p]=(0,u.useState)([]),[x,b]=(0,u.useState)(c);(0,u.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([fetch("".concat("https://silat.barengsaya.com/api","/institusi-tamu")),fetch("".concat("https://silat.barengsaya.com/api","/divisi"))]);if(e.ok){let t=await e.json();Object.keys(t.data).length>0&&f(t.data)}if(t.ok){let e=await t.json();Object.keys(e.data).length>0&&p(e.data)}}catch(e){console.error("Error fetching data:",e)}})()},[]);let g=(e,t)=>{var n,r;if("institusi_tamu_id"===e){let r=(null===(n=m.find(e=>e.nama===t))||void 0===n?void 0:n.id)||null;r&&a(t=>({...t,[e]:r}))}else if("divisi_id"===e){let n=(null===(r=h.find(e=>e.nama===t))||void 0===r?void 0:r.id)||null;n&&a(t=>({...t,[e]:n}))}else a(a=>({...a,[e]:t}))},v=(e,t)=>{x[t]=e},k=async()=>{let a=new FormData;Object.keys(t).forEach(e=>a.append(e,t[e]));try{let t=await fetch("".concat("https://silat.barengsaya.com/api","/buku-tamu"),{method:"POST",headers:{Authorization:"Bearer ".concat(d.env.NEXT_PUBLIC_TEMP_USER_TOKEN)},body:a});t.ok?(alert("Data berhasil ditambahkan"),e.push("/guestBook")):console.error("Failed to submit data",await t.json())}catch(e){console.error("Error submitting data:",e)}};return(0,n.jsxs)(i.default,{children:[(0,n.jsx)(s.default,{href:"/users",className:"mb-6",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})})}),(0,n.jsx)(r.Z,{pageName:"Tambah Tamu"}),(0,n.jsxs)("div",{className:"flex flex-col gap-9 rounded-sm border border-stroke bg-white px-6.5 py-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,n.jsx)(o.Z,{title:"Nama Tamu",onValueChange:e=>g("nama_tamu",e)}),(0,n.jsx)(o.Z,{title:"Alamat",onValueChange:e=>g("alamat",e)}),(0,n.jsx)(o.Z,{title:"No Telepon",onValueChange:e=>g("no_telpon",e)}),(0,n.jsx)(o.Z,{title:"Keperluan",onValueChange:e=>g("keperluan",e)}),(0,n.jsx)(o.Z,{title:"Instansi Asal",autoCompleteData:m.map(e=>e.nama),onValueChange:e=>g("institusi_tamu_id",e),onSelectAutoComplete:e=>{let t=m.find(t=>t.nama==e);t&&b(t)},addItemPath:"/institution/addData"}),(0,n.jsx)(o.Z,{title:"Divisi Tujuan",autoCompleteData:h.map(e=>e.nama),onValueChange:e=>g("divisi_id",e)}),(0,n.jsx)(o.Z,{title:"Alamat Instansi",autoCompleteData:h.map(e=>e.nama),onValueChange:e=>v(e,"alamat"),defaultValue:x.alamat}),(0,n.jsx)(o.Z,{title:"Kontak Instansi",autoCompleteData:h.map(e=>e.nama),onValueChange:e=>v(e,"kontak"),defaultValue:x.kontak})]}),(0,n.jsx)("button",{onClick:k,className:"flex w-full justify-center rounded bg-primary p-3 font-medium text-gray hover:bg-opacity-90",children:"Tambahkan tamu"})]})]})}},2598:function(e,t,a){"use strict";var n=a(7437),r=a(7648);t.Z=e=>{let{pageName:t}=e;return(0,n.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:t}),(0,n.jsx)("nav",{children:(0,n.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)(r.default,{className:"font-medium",href:"/",children:"Dashboard /"})}),(0,n.jsx)("li",{className:"font-medium text-primary",children:t})]})})]})}},5788:function(e,t,a){"use strict";var n=a(7437),r=a(9376),o=a(2265);t.Z=e=>{let{title:t,autoCompleteData:a,onValueChange:i,addItemPath:s,onSelectAutoComplete:l,defaultValue:u="",name:c=""}=e,[d,m]=(0,o.useState)(u),[f,h]=(0,o.useState)([]),[p,x]=(0,o.useState)(!1),b=(0,r.useRouter)();(0,o.useEffect)(()=>i(d),[d]),(0,o.useEffect)(()=>m(u),[u]);let g=e=>{x(!1),m(e),l(e)};return(0,o.useEffect)(()=>{h(a)},[a]),(0,n.jsxs)("div",{onBlur:()=>{setTimeout(()=>x(!1),500)},children:[(p||d)&&(0,n.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:t}),(0,n.jsx)("input",{type:"text",placeholder:t,value:d,onChange:e=>{e.target.value?x(!0):x(!1),m(e.target.value)},name:c,className:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent p-1.5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),(0,n.jsxs)("div",{className:"rounded-md bg-gray-100 w-full overflow-hidden px-4 py-2 mt-2 flex flex-col gap-y-4 text-left ".concat(p&&a?"":"hidden"),children:[null==f?void 0:f.filter(e=>!e||e.toLowerCase().includes(d.toLowerCase())).map((e,t)=>(0,n.jsx)("button",{onClick:()=>g(e),className:"hover:bg-blue-500 hover:text-white w-full text-left",children:e},t)),(0,n.jsx)("button",{onClick:()=>b.push(s),className:"hover:bg-blue-500 hover:text-white w-full",children:"+"})]})]})}}},function(e){e.O(0,[718,704,971,117,744],function(){return e(e.s=3082)}),_N_E=e.O()}]);