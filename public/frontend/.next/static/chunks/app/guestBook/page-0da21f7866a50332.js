(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{60032:function(e,t,a){Promise.resolve().then(a.bind(a,73710))},73710:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var n=a(57437),r=a(81154),i=a(85788),s=a(35715),l=a(99376),o=a(2265),d=a(68575),u=a(74470),c=a(94693),m=a(53720),h=a(85571);function x(){(0,l.useRouter)();let e=(0,d.oR)().getState(),t=e.auth,a=e.services,x=a.guestBook[0]||m.oX;(0,d.I0)();let[p,f]=(0,o.useState)(""),b=(e,t)=>{if(!e)return;let n=a.institutions;return 0==n.length?"":n[0][t]},k=async e=>{e.preventDefault();let n=new FormData(e.currentTarget),r=n.get("institusi_id");a.institutions.map(e=>{e.nama==r&&(n.delete("institusi_id"),n.append("institusi_id",e.id))}),await fetch("".concat("https://silat.barengsaya.com/api","/buku-tamu"),{method:"POST",headers:{Authorization:"Bearer ".concat(t.token)},body:n}).then(()=>{h.Am.success("Terima Kasih, telah mengisi!",{position:"top-right"}),window.location.reload()}).catch(()=>{h.Am.error("Galat saat menambahkan data!",{position:"top-right"})})};return(0,n.jsxs)(s.default,{children:[(0,n.jsx)(r.Z,{pageName:"Buku Tamu"}),(0,n.jsx)("div",{className:"flex flex-col gap-9 rounded-sm border border-stroke bg-white px-6.5 py-4 shadow-default dark:border-strokedark dark:bg-boxdark",children:(0,n.jsxs)("form",{onSubmit:k,className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)(i.Z,{title:"Nama Tamu",name:"nama_tamu"}),(0,n.jsx)(i.Z,{title:"Alamat",name:"alamat"}),(0,n.jsx)(i.Z,{title:"No Telepon",name:"no_telpon"}),(0,n.jsx)(i.Z,{title:"Keperluan",name:"keperluan"}),(0,n.jsx)(i.Z,{title:"Instansi Asal",name:"institusi_id",autoCompleteData:a.institutions.map(e=>e.nama),onSelectedAutoComplete:e=>f(e),addItemPath:"/institution/addData"}),(0,n.jsx)(c.Z,{title:"Divisi Tujuan",name:"divisi_id",options:a.divisions.map(e=>({name:e.nama,value:e.id}))}),(0,n.jsx)(i.Z,{title:"Alamat Instansi",name:"alamat_institusi",defaultValue:b(p,"alamat")}),(0,n.jsx)(i.Z,{title:"Kontak Instansi",name:"kontak_institusi",defaultValue:b(p,"kontak")}),(0,n.jsx)("button",{type:"submit",className:"col-span-2 flex w-full justify-center rounded bg-primary p-3 font-medium text-gray hover:bg-opacity-90",children:"Tambahkan tamu"})]})}),(0,n.jsxs)("div",{className:"flex flex-col gap-9 rounded-sm border border-stroke bg-white px-6.5 py-6 pb-12 shadow-default dark:border-strokedark dark:bg-boxdark",children:[(0,n.jsx)("h1",{className:"font-semibold text-black-2",children:"Data terakhir"}),(0,n.jsx)("div",{className:"flex items-center justify-between px-4",children:x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:(0,u.rd)(x.nama_tamu,20)}),(0,n.jsx)("p",{children:(0,u.rd)(x.keperluan,20)}),(0,n.jsx)("p",{children:(0,u.rd)(x.institusi.nama,20)}),(0,n.jsx)("p",{children:x.divisi.nama}),(0,n.jsx)("p",{children:(0,u.Fc)(x.created_at)})]}):(0,n.jsx)("p",{children:"Tidak ada pengunjung"})})]})]})}},81154:function(e,t,a){"use strict";var n=a(57437),r=a(27648);t.Z=e=>{let{pageName:t}=e;return(0,n.jsxs)("div",{className:"mb-6 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,n.jsx)("h2",{className:"text-title-md2 font-semibold text-black dark:text-white",children:t}),(0,n.jsx)("nav",{children:(0,n.jsxs)("ol",{className:"flex items-center gap-2",children:[(0,n.jsx)("li",{children:(0,n.jsx)(r.default,{className:"font-medium",href:"/",children:"Dashboard /"})}),(0,n.jsx)("li",{className:"font-medium text-primary",children:t})]})})]})}},85788:function(e,t,a){"use strict";var n=a(57437),r=a(99376),i=a(2265);t.Z=e=>{let{title:t,autoCompleteData:a=[],onSelectedAutoComplete:s=e=>void 0,addItemPath:l="",defaultValue:o="",type:d="text",multiple:u=!1,name:c=""}=e,m=(0,r.useRouter)(),[h,x]=(0,i.useState)(o),[p,f]=(0,i.useState)([]),[b,k]=(0,i.useState)(!1),g=e=>{x(e),k(!1),s(e)};return(0,i.useEffect)(()=>{x(o)},[o]),(0,i.useEffect)(()=>{f(a||[])},[]),(0,n.jsxs)("div",{className:"flex-1",onBlur:()=>{setTimeout(()=>k(!1),200)},children:[(0,n.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:t}),(0,n.jsx)("input",{type:d,placeholder:t,value:h,onChange:e=>{let t=e.target.value;x(t),k(!!t)},name:c,multiple:u,autoComplete:a?"off":"",className:"w-full rounded-lg border-[1.5px] border-stroke bg-transparent p-1.5 text-black outline-none transition focus:border-primary active:border-primary disabled:cursor-default disabled:bg-whiter dark:border-form-strokedark dark:bg-form-input dark:text-white dark:focus:border-primary"}),(0,n.jsxs)("div",{className:"mt-2 flex w-full flex-col gap-y-4 overflow-hidden rounded-md bg-gray-100 px-4 py-2 text-left ".concat(b&&p.length?"":"hidden"),children:[null==p?void 0:p.filter(e=>!!e&&e.toLowerCase().includes(h.toLowerCase())).map((e,t)=>(0,n.jsx)("button",{onClick:()=>g(e),className:"w-full text-left hover:bg-blue-500 hover:text-white",type:"button",children:e},t)),l&&(0,n.jsx)("button",{type:"button",onClick:()=>m.push(l),className:"w-full hover:bg-blue-500 hover:text-white",children:"+"})]})]})}},94693:function(e,t,a){"use strict";var n=a(57437);a(2265),t.Z=e=>{let{title:t,options:a,name:r,defaultValue:i}=e;return(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"mb-3 block text-sm font-medium text-black dark:text-white",children:t}),(0,n.jsxs)("div",{className:"relative z-20 bg-white dark:bg-form-input",children:[(0,n.jsxs)("select",{value:i,name:r,className:"relative z-20 w-full appearance-none rounded border border-stroke bg-transparent px-4 py-3 outline-none transition focus:border-primary active:border-primary dark:border-form-strokedark dark:bg-form-input ",children:[(0,n.jsx)("option",{value:"",disabled:!0,className:"text-body dark:text-bodydark",children:t}),null==a?void 0:a.map((e,t)=>(0,n.jsx)("option",{value:e.value,className:"text-body dark:text-bodydark",selected:e.value==i,children:e.name},t))]}),(0,n.jsx)("span",{className:"absolute right-4 top-1/2 z-10 -translate-y-1/2",children:(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("g",{opacity:"0.8",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29289 8.29289C5.68342 7.90237 6.31658 7.90237 6.70711 8.29289L12 13.5858L17.2929 8.29289C17.6834 7.90237 18.3166 7.90237 18.7071 8.29289C19.0976 8.68342 19.0976 9.31658 18.7071 9.70711L12.7071 15.7071C12.3166 16.0976 11.6834 16.0976 11.2929 15.7071L5.29289 9.70711C4.90237 9.31658 4.90237 8.68342 5.29289 8.29289Z",fill:"#637381"})})})})]})]})}},74470:function(e,t,a){"use strict";function n(e){return e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" ")}function r(e){let t=new Date(e),a=t.getDate(),n=t.toLocaleString("default",{month:"long"}),r=t.getFullYear();return"".concat(a," ").concat(n," ").concat(r)}function i(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return[e.substring(0,t),"..."].join("")}function s(){let e=new Date;return"".concat(e.getDay()," ").concat(e.toLocaleString("default",{month:"long"})," ").concat(e.getFullYear())}a.d(t,{Dj:function(){return n},Fc:function(){return r},k5:function(){return s},rd:function(){return i}})}},function(e){e.O(0,[281,718,571,715,971,117,744],function(){return e(e.s=60032)}),_N_E=e.O()}]);